{
        email {$CADDY_EMAIL}

        # For testing to avoid rate limits
        #ca https://acme-staging-v02.api.letsencrypt.org/directory

        # Enable debug mode
        #debug
}

{$CADDY_DOMAIN:localhost} {
        log {
                format filter {
                        request>remote_ip ip_mask 16 32
                        request>client_ip ip_mask 16 32
                }
        }

        reverse_proxy /socket.io/* {$CADDY_PROXY_ADDRESS} {
                lb_policy cookie
        }

        # Return 404 for all other requests
        @not_proxy {
                not path /socket.io/*
        }

        respond @not_proxy 404 {
                close
        }
}
